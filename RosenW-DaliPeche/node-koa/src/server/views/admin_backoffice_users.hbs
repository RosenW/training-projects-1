<html lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="./../bootstrap.css">
  </head>
   <body>
    <ul class="list-group-item col-lg-offset-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-4 col-lg-4 col-md-4 col-sm-4 col-xs-4">
      <form class="inline">
        {{> adminForm }}
        <br>
        <label>Username:</label>
        <input type="text" name="term" class="form-control" value="{{username}}">
        <br>
        <input type="submit" id="search-btn" value="Search" class='btn btn-default pull-right'>
      </form>
    </ul>
    <h2 class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">Backoffice Users</h2>
    <table id="users-table" class="table table-hover">
      <tr>
        <th>ID</th>
        <th>User</th>
        <th>Role</th>
        {{#if permissions.can_edit_backoffice_users}}
          <th>Save Changes</th>
        {{/if}}
      </tr>
      {{#each users}}
        <form method="post">
          <tr class="gen-tr">
            <td>{{id}}<input name="id" type="text" hidden="hidden" value="{{id}}"></td>
            <td>{{username}}</td>
            {{#if ../permissions.can_edit_backoffice_users}}
              <td>
                <select name="select-role">
                  <option selected="selected" hidden="hidden" value="{{role_id}}">{{role}}</option>
                  {{#each ../roles}}
                    <option value="{{id}}">{{role}}</option>
                  {{/each}}
                </select>
              </td>
            {{else}}
              <td>{{role}}</td>
            {{/if}}
            {{#if ../permissions.can_edit_backoffice_users}}
              <td><input type="submit" value="Save"></td>
            {{/if}}
          </tr>
        </form>
      {{/each}}
    </table>
    <nav aria-label="Page navigation example" class="col-lg-offset-5 col-md-offset-5 col-sm-offset-5 col-xs-offset-5">
      <ul class="pagination">
        <li class="page-item"><a class="page-link" href="/admin/backoffice-users?page={{prevPage}}&term={{term}}">Previous Page</a></li>
        <li class="page-item"><a class="page-link" href="/admin/backoffice-users?page={{nextPage}}&term={{term}}">Next Page</a></li>
      </ul>
    </nav>
  </body>
</html>

<script type="text/javascript">
  document.getElementById('select-backoffice-users').setAttribute('selected', 'selected');
</script>